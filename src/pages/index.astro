---
import Layout from '@layouts/Base.astro';
import { Image } from "astro:assets"
import heroImage from "../assets/DSC_0553.jpg"

const kickoffDate = new Date("2026-04-26T00:00:00");
---

<Layout title="Home - FRC Team 10070" description="Welcome to FRC Team 10070, the GhostBots. Discover our robotics journey, latest news, and how to get involved.">
    <section class="relative text-black py-2">
        <div class="relative container mx-auto">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                <div class="text-left">
                    <h1 class="font-header text-5xl md:text-7xl mb-6 text-tamarillo-700">FRC 10070</h1>
                    <p class="text-xl md:text-2xl mb-8 max-w-2xl drop-shadow-md">We're GhostBots, Abington Senior High School's FIRST Robotics team.</p>
                    <div id="countdown" class="mb-10 inline-block text-center p-6 bg-white rounded-lg shadow-lg border-2 hover:border-tamarillo-800 hover:shadow-xl transition-all duration-200">
                        <h2 class="text-2xl font-header mb-4 text-tamarillo-700">FRC Competion Countdown</h2>
                        <div class="text-4xl font-bold text-blue-chill-700" id="timer" dmata-date={kickoffDate}>
                            Loading...
                        </div>
                        <p class="text-sm text-black mt-3">
                            {kickoffDate.toLocaleString("en-US", {
                                year: "numeric",
                                month: "long",
                                day: "2-digit",
                            })}
                        </p>
                    </div>
                    <div class="space-x-4 text-center lg:text-left">
                        <a href="/sponsors" class="inline-flex items-center bg-tamarillo-700 text-white px-8 py-4 rounded-xl font-semibold hover:bg-tamarillo-500 transition-all duration-200 shadow-lg hover:shadow-xl hover:-translate-y-1">
                            <span>Become a Sponsor</span>
                            <svg class="ml-2 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                            </svg>
                        </a>
                        <!-- <a href="/about" class="border-2 border-tamarillo-500 px-8 py-3 rounded-lg font-semibold hover:bg-tamarillo-500 transition-colors text-lg">Learn More</a> -->
                    </div>
                </div>
                <div class="lg:order-2">
                    <Image layout="constrained" src={heroImage} alt="FRC Team 10070 Robot in Action" class="w-full h-auto object-cover rounded-lg shadow-lg border-2 border-black" />
                </div>
            </div>
        </div>
    </section>

    <section class="py-16 mt-12 bg-gray-50 max-w-5xl mx-auto bg-blue-chill-50 border-2 border-black rounded-xl">
        <div class="container mx-auto px-4">
            <h2 class="font-header text-4xl md:text-5xl mb-8 text-tamarillo-700 text-center">2025 Season Video</h2>
            <div class="max-w-4xl mx-auto">
                <div class="relative" style="padding-bottom: 56.25%; height: 0;">
                    <iframe 
                        class="absolute top-0 left-0 w-full h-full rounded-lg shadow-lg" 
                        src="https://www.youtube-nocookie.com/embed/EizQqQwtWe8?si=avIt-ClELOumZX4R" 
                        title="YouTube video player" 
                        allow="" 
                        referrerpolicy="strict-origin-when-cross-origin" 
                        allowfullscreen>
                    </iframe>
                </div>
            </div>
        </div>
    </section>


</Layout>

<script>
    function initCountdown() {
        const timer = document.getElementById('timer')!;
        if (!timer) return;

        const future = new Date(timer.dataset.date!);
        let countdownInterval: NodeJS.Timeout;

        function updateCountdown() {
            const now = new Date().getTime();
            const distance = future.getTime() - now;

            if (distance < 0) {
                timer.innerHTML = "Competition has begun!";
                return;
            }

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            timer.innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;
        }

        updateCountdown();
        countdownInterval = setInterval(updateCountdown, 1000);
    }

    initCountdown();
</script>
